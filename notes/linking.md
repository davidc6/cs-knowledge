# Linking

Is a process of combining various parts of code and data into a single file that
can be loaded into memory and executed.

Linking can be done at compile time, load time or run time.

Linking allows to compose software of small, managable modules that can be
modified and compiled separately. These can be modified and changed separately. 
Changing one of the modules enables to recompile and relink the application
without recompiling other modules. 

- Knowing about how linkers work enables to understand how dependencies are
resolved and debug these types of errors.

- Programming errors can be avoided
since incorrectly defined global variables can pass through the linker without
any warnings and can cause odd run-time behaviour. 

- Understanding linking allows to understand scoping better (e.g. global vs
  local variables or what is a static attribute)

- Enables to use shared libraries to upgrade shrink-wrapped (packaged software) 
at run time

- Linkers produce executable objects that play important roles in loading and
  running programs, virtual memory, memory mapping and paging.

## Object files

There are 3 types of object files:

- Relocatable object file - data and code available for linking with with other
  object files in order to create an executable or shared object file
- Executable object file - a program for execution (directly copies into memory
  and executed)
- Shared object file - data and code, can be loaded into memory and linked
  dynamically, or load or run time.

Relocatable object files and shared object files are generated by the compilers
and assemblers. These objects are combined together by linkers to generate
executable object files.

## Static libraries

`.a` extension is used on Linux systems to denote archive files. These files are
a collection of concatenated relocatable object files. These files also include
a header that has information about the size and location of each object file.

## ELF - object file format

- Object files are merely a collection of blocks of bytes. The format of these
  varies. a.out files on early Unix, PE on Windows, Mach-O on Mac, modern x86
  systems use ELF.

  - Relocatable object file - binary code and data which can be combined with
    other relocatable object files. Generated by compilers amd assemblers.

  - Executable object file - binary code and data that can be copied into memory
    and executed. Generated by linkers.

  - Shared object file - special type of object that can be loaded into memory
    and linked dynamically (at load or run times). Generated by compilers and
    assemblers.

- ELF format has a number of sections.

  - ELF header 16-byte sequence that describes byte ordering (endianness) and word size of
    the system

## References

Linkers - https://www.cs.cmu.edu/afs/cs/academic/class/15213-f10/www/lectures/11-linking.pdf
Linking notes - https://people.cs.pitt.edu/~xianeizhang/notes/Linking.html

